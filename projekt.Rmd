---
title: "Analiza slovenskega in hrvaškega turizma"
author: "Gašper Pust"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Pri tem projektu bom analiziral podatke o turizmu v Sloveniji in na Hrvaškem. Primerjal bom predvsem, iz katerih držav prihaja največ turistov v omenjenih državah, ter kam največkrat odhajajo državljani Slovenije in Hrvaške. Obdobje, ki ga bom obravnaval je zadnje desetletje (2010-2019), saj je večina podatkov pred letom 2010 pomanjlkjivih.

Za vsako državo bom uporabil tabele o sestavi turistov glede na državo oz. svetovno regijo, iz katere prihajajo, številu nočitev in vrsti prebivališča (hotel, kamp,...), turističnih destinacijah prebivalcev te države, dolžini in namenu potovanja

Za zemljevid bom uporabil podatke o nočitvah v posameznih slovenskih občinah.

Viri: za projekt bom uporabil podatke iz Eurostat-a in SiStat-a.

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/projekt_uvoz.r", encoding="UTF-8")
```

Uvozil sem podatke o turizmu Slovenije in Hrvaške v obliki CSV z Eurostata. Podatke imam v dveh razpredelnicah v obliki *tidy data*.

1. `podatki_o_nocitvah` - podatki o nočitvah za vsako od omenjenih držav
  - `leto` - spremenljivka: leto meritve (2010-2018),
  - `izvor_turistov` - spremenljivka: od kje prihajajo turisti (Evropa, Nemčija, Španija, Francija, Hrvaška, Italija, Avstrija, Slovenija, Združeno Kraljestvo, Amerika, Azija, vse države sveta),
  - `prebivalisce` - spremenljivka: kje prebivajo turisti (hoteli in ostale kratkoročne akomodacije, kampi in prikoličarska naselja),
  - `vrednost` - meritev: število turistov v ustrezni kategoriji.

2. `podatki_o_potovanjih` - podatki o potovanjih prebivalcev vsake od omenjenih držav
  - `leto` - spremenljivka: leto meritve (2010-2018),
  - `destinacija` - spremenljivka: kam so potovali (Evropa, Nemčija, Hrvaška, Italija, Slovenija, vse države sveta),
  - `namen` - spremenljivka: namen potovanja (osebni razlogi, poslovno),
  - `dolzina` - spremenljivka: število nočitev (1, 1-3, 4 ali več),
  - `vrednost` - meritev: število potovanj v ustrezni kategoriji.
  
3. `podatki_o_obcinah` - podatki o nočitvah v posameznih slovenskih občinah
  - `obcina` - spremenljivka: občina,
  - `stevilo.nocitev` - meritev: število nočitev v posamezni občini

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/projekt_vizualizacija.r", encoding="UTF-8")
```
```{r analiza, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("analiza/analiza.r", encoding="UTF-8")
```

Spodnji grafi prikazujejo analizo različnih kategorij nočitev in potovanj za Slovenijo in Hrvaško v obdobju 2010 do 2018, pri čemer so podatki, ki niso bili na voljo, upoštevani kot 0. V prvih 4 grafih modra barva predstavlja Slovenijo, rdeča pa Hrvaško.
```{r grafi, echo=FALSE, fig.align='center', warning=FALSE}
print(graf1)
print(graf2)
print(graf3)
print(graf4)
print(graf5)
print(graf6)
print(graf7)
print(graf8)
```

Spodnji zemljevid prikazuje število nočitev v posameznih občinah v letu 2018:

```{r zemljevid, echo=FALSE, fig.align='center', fig.cap='Zemljevid nočitev'}
ggplot() + geom_polygon(data=left_join(zemljevid, obcine, by=c("OB_UIME"="obcina")),
                        aes(x=long, y=lat, group=group, fill=stevilo.nocitev)) +
  ggtitle("Število nočitev po slovenskih občinah") + xlab("") + ylab("") +
  guides(fill=guide_colorbar(title="Število nočitev"))
```
***